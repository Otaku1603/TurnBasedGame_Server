/*
 Navicat Premium Dump SQL

 Source Server         : LocalLocation_MySQL
 Source Server Type    : MySQL
 Source Server Version : 90600 (9.6.0)
 Source Host           : localhost:3306
 Source Schema         : turn_based_game

 Target Server Type    : MySQL
 Target Server Version : 90600 (9.6.0)
 File Encoding         : 65001

 Date: 08/02/2026 13:24:39
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for t_admin
-- ----------------------------
DROP TABLE IF EXISTS `t_admin`;
CREATE TABLE `t_admin`  (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `username` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '用户名',
  `password` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '密码（BCrypt加密）',
  `nickname` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '昵称',
  `created_at` datetime NOT NULL COMMENT '创建时间',
  `last_login` datetime NULL DEFAULT NULL COMMENT '最后登录时间',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `username`(`username` ASC) USING BTREE,
  INDEX `idx_username`(`username` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '管理员表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_admin
-- ----------------------------
INSERT INTO `t_admin` VALUES (1, 'admin', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVKIUi', '超级管理员', '2026-01-18 13:57:12', '2026-02-03 21:13:22');

-- ----------------------------
-- Table structure for t_battle_record
-- ----------------------------
DROP TABLE IF EXISTS `t_battle_record`;
CREATE TABLE `t_battle_record`  (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '战斗记录ID（自增主键）',
  `battle_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '战斗唯一ID（对应Redis中的battleId，格式：battle_时间戳_随机数）',
  `player1_id` bigint NOT NULL COMMENT '玩家1的用户ID（对应t_user.id）',
  `player1_nickname` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '玩家1昵称（冗余字段，避免每次查询都关联User表）',
  `player1_char_id` bigint NULL DEFAULT NULL COMMENT '玩家1使用的角色ID（对应t_character.id）',
  `player2_id` bigint NOT NULL COMMENT '玩家2的用户ID（对应t_user.id）',
  `player2_nickname` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '玩家2昵称（冗余字段，避免每次查询都关联User表）',
  `player2_char_id` bigint NULL DEFAULT NULL COMMENT '玩家2使用的角色ID（对应t_character.id）',
  `winner_id` bigint NULL DEFAULT NULL COMMENT '获胜者的用户ID（NULL表示平局或异常终止，对应t_user.id）',
  `end_reason` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '战斗结束原因（NORMAL=正常结束, SURRENDER=投降, TIMEOUT=超时, DISCONNECT=断线）',
  `total_rounds` int NULL DEFAULT 0 COMMENT '总回合数（从1开始计数，例如进行了5个回合则为5）',
  `battle_duration` int NULL DEFAULT NULL COMMENT '战斗总时长（单位：秒，从战斗开始到结束的耗时）',
  `player1_final_hp` int NULL DEFAULT NULL COMMENT '玩家1战斗结束时的剩余血量（HP）',
  `player1_elo_before` int NULL DEFAULT NULL COMMENT '玩家1战前ELO积分（用于追溯历史排名变化）',
  `player1_elo_after` int NULL DEFAULT NULL COMMENT '玩家1战后ELO积分（胜利+分，失败-分）',
  `player2_final_hp` int NULL DEFAULT NULL COMMENT '玩家2战斗结束时的剩余血量（HP）',
  `player2_elo_before` int NULL DEFAULT NULL COMMENT '玩家2战前ELO积分（用于追溯历史排名变化）',
  `player2_elo_after` int NULL DEFAULT NULL COMMENT '玩家2战后ELO积分（胜利+分，失败-分）',
  `battle_log_json` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL COMMENT '战斗完整日志（JSON格式，包含每回合的行动、伤害、技能使用等）',
  `start_time` datetime NULL DEFAULT NULL COMMENT '战斗开始时间（玩家双方都准备完毕的时刻）',
  `end_time` datetime NULL DEFAULT NULL COMMENT '战斗结束时间（分出胜负或异常终止的时刻）',
  `created_at` datetime NULL DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间（数据插入MySQL的时间）',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `battle_id`(`battle_id` ASC) USING BTREE,
  INDEX `idx_battle_id`(`battle_id` ASC) USING BTREE,
  INDEX `idx_player1`(`player1_id` ASC) USING BTREE,
  INDEX `idx_player2`(`player2_id` ASC) USING BTREE,
  INDEX `idx_created_at`(`created_at` ASC) USING BTREE,
  INDEX `idx_winner`(`winner_id` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 20 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '战斗记录表（持久化存储所有已完成的战斗）' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_battle_record
-- ----------------------------
INSERT INTO `t_battle_record` VALUES (1, 'BATTLE_1768724986676_14d43310', 1, '测试玩家1', 1, 2, '测试玩家2', 2, 1, 'NORMAL', 5, 33, 70, 1000, 1025, 0, 1000, 985, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"READY\",\"skillName\":null,\"damage\":null,\"heal\":null,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-18T16:29:48.2302208\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"READY\",\"skillName\":null,\"damage\":null,\"heal\":null,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-18T16:29:50.3163754\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-18T16:29:53.551685\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-18T16:30:03.976316\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-18T16:30:06.6573838\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-18T16:30:08.7776303\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-18T16:30:11.1671374\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-18T16:30:13.589369\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-18T16:30:16.3724979\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-18T16:30:18.712504\"},{\"round\":5,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-18T16:30:20.660394\"}]', '2026-01-18 16:29:47', '2026-01-18 16:30:21', '2026-01-18 16:30:21');
INSERT INTO `t_battle_record` VALUES (2, 'BATTLE_1768725275887_90948aac', 1, '测试玩家1', 1, 2, '测试玩家2', 2, 1, 'NORMAL', 5, 29, 70, 1025, 1050, 0, 985, 970, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"READY\",\"skillName\":null,\"damage\":null,\"heal\":null,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-18T16:34:39.9313688\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"READY\",\"skillName\":null,\"damage\":null,\"heal\":null,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-18T16:34:41.7549716\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-18T16:34:45.8990514\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-18T16:34:48.8568971\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-18T16:34:50.9272741\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-18T16:34:53.9383324\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-18T16:34:56.4269785\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-18T16:34:59.0055997\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-18T16:35:01.2475221\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-18T16:35:03.5304982\"},{\"round\":5,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"SKILL\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-18T16:35:05.5833408\"}]', '2026-01-18 16:34:36', '2026-01-18 16:35:06', '2026-01-18 16:35:06');
INSERT INTO `t_battle_record` VALUES (3, 'BATTLE_1769332454010_d29936bd', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 2, 'TIMEOUT', 1, 97, 100, 1030, 1055, 117, 1030, 1015, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-25T17:14:14.1273161\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-25T17:14:14.3355973\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":33,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 33 点伤害\",\"timestamp\":\"2026-01-25T17:14:20.0900028\"}]', '2026-01-25 17:14:14', '2026-01-25 17:15:51', '2026-01-25 17:15:51');
INSERT INTO `t_battle_record` VALUES (4, 'BATTLE_1769337680677_b705e92c', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 2, 'TIMEOUT', 1, 98, 100, 1055, 1080, 150, 1015, 1000, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-25T18:41:20.7662235\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-25T18:41:20.7662235\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-01-25T18:41:29.2088162\"}]', '2026-01-25 18:41:21', '2026-01-25 18:43:00', '2026-01-25 18:43:00');
INSERT INTO `t_battle_record` VALUES (5, 'BATTLE_1769431177894_1a486b52', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 2, 'TIMEOUT', 1, 94, 100, 1080, 1105, 130, 1000, 985, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-26T20:39:37.9569372\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-26T20:39:37.9599372\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-26T20:39:40.0769048\"}]', '2026-01-26 20:39:38', '2026-01-26 20:41:12', '2026-01-26 20:41:12');
INSERT INTO `t_battle_record` VALUES (6, 'BATTLE_1769431592218_fa008ff5', 1, '测试玩家1', 1, 2, '测试玩家2', 2, 1, 'NORMAL', 6, 33, 87, 985, 1010, 0, 1105, 1090, '[{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-26T20:46:32.286737\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-26T20:46:32.286737\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-26T20:46:34.2777472\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-26T20:46:36.2486869\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-26T20:46:39.223326\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":35,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 重击，造成 35 点伤害\",\"timestamp\":\"2026-01-26T20:46:41.7930037\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-26T20:46:44.5576464\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":33,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 33 点伤害\",\"timestamp\":\"2026-01-26T20:46:47.4784471\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"治疗术\",\"skillName\":\"治疗术\",\"damage\":0,\"heal\":45,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 使用 治疗术，恢复了 45 点生命\",\"timestamp\":\"2026-01-26T20:46:54.9230172\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-01-26T20:46:57.9933719\"},{\"round\":5,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害 (防御减伤)\",\"timestamp\":\"2026-01-26T20:47:00.1375747\"},{\"round\":5,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-26T20:47:03.1797621\"},{\"round\":6,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-26T20:47:05.8060451\"}]', '2026-01-26 20:46:32', '2026-01-26 20:47:06', '2026-01-26 20:47:06');
INSERT INTO `t_battle_record` VALUES (7, 'BATTLE_1769436449639_df2750ab', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 2, 'TIMEOUT', 2, 108, 71, 1090, 1115, 95, 1010, 995, '[{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-26T22:07:29.7106197\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":35,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 重击，造成 35 点伤害\",\"timestamp\":\"2026-01-26T22:07:34.3675012\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-26T22:07:36.0807132\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-26T22:07:47.4416848\"}]', '2026-01-26 22:07:30', '2026-01-26 22:09:19', '2026-01-26 22:09:19');
INSERT INTO `t_battle_record` VALUES (8, 'BATTLE_1769436899480_ce3ba19d', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 2, 'TIMEOUT', 2, 102, 100, 1115, 1140, 95, 995, 980, '[{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-26T22:14:59.5486262\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":35,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 重击，造成 35 点伤害\",\"timestamp\":\"2026-01-26T22:15:03.1022507\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":0,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 0 点伤害 (被闪避!)\",\"timestamp\":\"2026-01-26T22:15:04.6849707\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-26T22:15:10.8304868\"}]', '2026-01-26 22:15:00', '2026-01-26 22:16:42', '2026-01-26 22:16:42');
INSERT INTO `t_battle_record` VALUES (9, 'BATTLE_1769437378841_0f689c18', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 1, 'NORMAL', 6, 33, 0, 1140, 1125, 20, 980, 1005, '[{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-26T22:22:58.9141854\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-26T22:22:58.9180942\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":35,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 重击，造成 35 点伤害\",\"timestamp\":\"2026-01-26T22:23:00.116757\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"道具:生命药水\",\"skillName\":\"道具:生命药水\",\"damage\":0,\"heal\":50,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 使用了 生命药水，恢复了 50 点生命\",\"timestamp\":\"2026-01-26T22:23:04.13184\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-26T22:23:12.1467353\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-26T22:23:14.2655262\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":35,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 重击，造成 35 点伤害\",\"timestamp\":\"2026-01-26T22:23:17.4923646\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-26T22:23:19.8497336\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-26T22:23:22.8552531\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-26T22:23:24.4504872\"},{\"round\":5,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":35,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 重击，造成 35 点伤害\",\"timestamp\":\"2026-01-26T22:23:27.3886825\"},{\"round\":5,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-26T22:23:29.3161852\"},{\"round\":6,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-26T22:23:31.1453396\"},{\"round\":6,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-26T22:23:32.635156\"}]', '2026-01-26 22:22:59', '2026-01-26 22:23:33', '2026-01-26 22:23:33');
INSERT INTO `t_battle_record` VALUES (10, 'BATTLE_1769521258329_edc1a787', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 1, 'NORMAL', 5, 94, 0, 1125, 1110, 20, 1005, 1030, '[{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-27T21:40:58.4513142\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-27T21:40:58.4552244\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-27T21:41:11.2421131\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-27T21:41:23.7588731\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":35,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 重击，造成 35 点伤害\",\"timestamp\":\"2026-01-27T21:42:16.3203786\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-27T21:42:18.2736042\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-27T21:42:21.2233581\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-27T21:42:23.156522\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-27T21:42:25.9796977\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-27T21:42:28.1233897\"},{\"round\":5,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":35,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 重击，造成 35 点伤害\",\"timestamp\":\"2026-01-27T21:42:31.1255071\"},{\"round\":5,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":28,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 28 点伤害\",\"timestamp\":\"2026-01-27T21:42:33.0571187\"}]', '2026-01-27 21:40:58', '2026-01-27 21:42:33', '2026-01-27 21:42:33');
INSERT INTO `t_battle_record` VALUES (11, 'BATTLE_1769589660450_a53da28c', 1, '测试玩家1', 1, 2, '测试玩家2', 2, 2, 'SURRENDER', 1, 5, 150, 1030, 1015, 100, 1110, 1135, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-28T16:41:02.2533139\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-28T16:41:03.1990162\"}]', '2026-01-28 16:41:00', '2026-01-28 16:41:05', '2026-01-28 16:41:06');
INSERT INTO `t_battle_record` VALUES (12, 'BATTLE_1769589672637_691b252b', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 2, 'SURRENDER', 1, 35, 100, 1135, 1160, 130, 1015, 1000, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-28T16:41:13.6014558\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-28T16:41:16.6649588\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-28T16:41:25.8845273\"}]', '2026-01-28 16:41:13', '2026-01-28 16:41:48', '2026-01-28 16:41:48');
INSERT INTO `t_battle_record` VALUES (13, 'BATTLE_1769589920694_d73925df', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 2, 'SURRENDER', 1, 25, 100, 1160, 1185, 130, 1000, 985, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-28T16:45:21.775099\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-28T16:45:23.051285\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-28T16:45:31.3549977\"}]', '2026-01-28 16:45:21', '2026-01-28 16:45:46', '2026-01-28 16:45:46');
INSERT INTO `t_battle_record` VALUES (14, 'BATTLE_1769846055773_ce1dad0b', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 2, 'SURRENDER', 5, 77, 72, 1185, 1210, 97, 985, 970, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-31T15:54:16.7364024\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-31T15:54:18.043539\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":35,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 重击，造成 35 点伤害\",\"timestamp\":\"2026-01-31T15:54:37.2959459\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"道具:生命药水\",\"skillName\":\"道具:生命药水\",\"damage\":0,\"heal\":50,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 使用了 生命药水，恢复了 50 点生命\",\"timestamp\":\"2026-01-31T15:54:43.093631\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":0,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 0 点伤害 (被闪避!)\",\"timestamp\":\"2026-01-31T15:54:47.9632867\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-31T15:54:52.4547977\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-31T15:54:55.2232569\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-31T15:55:10.3379728\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"道具:强力药水\",\"skillName\":\"道具:强力药水\",\"damage\":0,\"heal\":100,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 使用了 强力药水，恢复了 100 点生命\",\"timestamp\":\"2026-01-31T15:55:14.977299\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":28,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 28 点伤害\",\"timestamp\":\"2026-01-31T15:55:17.4704038\"},{\"round\":5,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":33,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 33 点伤害\",\"timestamp\":\"2026-01-31T15:55:22.3318807\"}]', '2026-01-31 15:54:16', '2026-01-31 15:55:34', '2026-01-31 15:55:34');
INSERT INTO `t_battle_record` VALUES (15, 'BATTLE_1769857515064_7a6b7a56', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 1, 'NORMAL', 13, 119, 0, 1210, 1195, 10, 970, 995, '[{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-01-31T19:05:18.0652353\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-01-31T19:05:21.8968004\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-31T19:05:25.6738341\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-31T19:05:27.8925697\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"治疗术\",\"skillName\":\"治疗术\",\"damage\":0,\"heal\":30,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 使用 治疗术，恢复了 30 点生命\",\"timestamp\":\"2026-01-31T19:05:35.382959\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-31T19:05:38.3075689\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-01-31T19:05:43.0730614\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":0,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 0 点伤害 (被闪避!)\",\"timestamp\":\"2026-01-31T19:05:45.5739664\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-31T19:05:52.0490867\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-31T19:05:56.1111084\"},{\"round\":5,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-01-31T19:05:59.0366196\"},{\"round\":5,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-01-31T19:06:02.9205751\"},{\"round\":6,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害 (防御减伤)\",\"timestamp\":\"2026-01-31T19:06:06.6605909\"},{\"round\":6,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-31T19:06:09.6045908\"},{\"round\":7,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"治疗术\",\"skillName\":\"治疗术\",\"damage\":0,\"heal\":30,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 使用 治疗术，恢复了 30 点生命\",\"timestamp\":\"2026-01-31T19:06:12.9453496\"},{\"round\":7,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-31T19:06:16.1044891\"},{\"round\":8,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-31T19:06:19.1511877\"},{\"round\":8,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":0,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 0 点伤害 (被闪避!)\",\"timestamp\":\"2026-01-31T19:06:21.0898117\"},{\"round\":9,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-31T19:06:25.8185413\"},{\"round\":9,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-31T19:06:48.2219835\"},{\"round\":10,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"治疗术\",\"skillName\":\"治疗术\",\"damage\":0,\"heal\":30,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 使用 治疗术，恢复了 30 点生命\",\"timestamp\":\"2026-01-31T19:06:52.0659037\"},{\"round\":10,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-01-31T19:06:54.8231608\"},{\"round\":11,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-01-31T19:06:57.9624647\"},{\"round\":11,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-01-31T19:07:00.7223034\"},{\"round\":12,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害 (防御减伤)\",\"timestamp\":\"2026-01-31T19:07:02.5930472\"},{\"round\":12,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-01-31T19:07:08.2547676\"},{\"round\":13,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-01-31T19:07:13.459248\"},{\"round\":13,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害 (防御减伤)\",\"timestamp\":\"2026-01-31T19:07:14.707396\"}]', '2026-01-31 19:05:15', '2026-01-31 19:07:15', '2026-01-31 19:07:15');
INSERT INTO `t_battle_record` VALUES (16, 'BATTLE_1770123067877_8c0a004e', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 1, 'NORMAL', 7, 29, 0, 1195, 1180, 90, 995, 1020, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-02-03T20:51:08.5701578\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-02-03T20:51:09.2173662\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-02-03T20:51:11.1050324\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害\",\"timestamp\":\"2026-02-03T20:51:13.1331563\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-03T20:51:15.8159835\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":28,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 28 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-03T20:51:16.9737116\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-03T20:51:19.1194299\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-03T20:51:21.065536\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"治疗术\",\"skillName\":\"治疗术\",\"damage\":0,\"heal\":30,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 使用 治疗术，恢复了 30 点生命\",\"timestamp\":\"2026-02-03T20:51:23.4825332\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-02-03T20:51:25.931875\"},{\"round\":5,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-02-03T20:51:28.0277616\"},{\"round\":5,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-03T20:51:30.4774023\"},{\"round\":6,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-03T20:51:31.4338342\"},{\"round\":6,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-03T20:51:32.8101149\"},{\"round\":7,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-02-03T20:51:35.0517595\"},{\"round\":7,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-02-03T20:51:37.2882485\"}]', '2026-02-03 20:51:08', '2026-02-03 20:51:37', '2026-02-03 20:51:37');
INSERT INTO `t_battle_record` VALUES (17, 'BATTLE_1770213729992_69314e31', 1, '测试玩家1', 1, 2, '测试玩家2', 2, 1, 'NORMAL', 9, 77, 150, 1020, 1045, 0, 1180, 1165, '[{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-02-04T22:02:11.4344704\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-02-04T22:02:14.1714502\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-02-04T22:02:22.2824373\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T22:02:26.3479506\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T22:02:29.4049618\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T22:02:34.813933\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T22:02:37.7386516\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"治疗术\",\"skillName\":\"治疗术\",\"damage\":0,\"heal\":30,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 使用 治疗术，恢复了 30 点生命\",\"timestamp\":\"2026-02-04T22:02:43.0808684\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-02-04T22:02:46.7051295\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T22:02:51.1142389\"},{\"round\":5,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T22:02:54.1704129\"},{\"round\":5,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T22:02:58.7643287\"},{\"round\":6,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T22:03:01.4388282\"},{\"round\":6,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"治疗术\",\"skillName\":\"治疗术\",\"damage\":0,\"heal\":30,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 使用 治疗术，恢复了 30 点生命\",\"timestamp\":\"2026-02-04T22:03:06.3310602\"},{\"round\":7,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-02-04T22:03:09.7050758\"},{\"round\":7,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T22:03:13.7971363\"},{\"round\":8,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":29,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 29 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T22:03:16.4382717\"},{\"round\":8,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T22:03:24.3139477\"},{\"round\":9,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T22:03:27.226643\"}]', '2026-02-04 22:02:10', '2026-02-04 22:03:27', '2026-02-04 22:03:27');
INSERT INTO `t_battle_record` VALUES (18, 'BATTLE_1770217723692_9587fbf5', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 1, 'SURRENDER', 8, 105, 32, 1165, 1150, 90, 1045, 1070, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-02-04T23:08:46.8508383\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-02-04T23:08:49.7649277\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-02-04T23:08:52.5701048\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T23:08:56.5006278\"},{\"round\":2,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":10,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 10 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T23:08:59.4494403\"},{\"round\":2,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-02-04T23:09:22.0391978\"},{\"round\":3,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T23:09:27.4489997\"},{\"round\":3,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":9,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 9 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T23:09:31.1550356\"},{\"round\":4,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":20,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 20 点伤害\",\"timestamp\":\"2026-02-04T23:09:52.1486026\"},{\"round\":4,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T23:09:58.8572173\"},{\"round\":5,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":10,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 10 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T23:10:01.7308863\"},{\"round\":5,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-02-04T23:10:09.3101609\"},{\"round\":6,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T23:10:13.98162\"},{\"round\":6,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":9,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 9 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T23:10:16.5835101\"},{\"round\":7,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"防御\",\"skillName\":\"防御\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 进入防御姿态，下回合受到的伤害减半\",\"timestamp\":\"2026-02-04T23:10:20.2641341\"},{\"round\":7,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"重击\",\"skillName\":\"重击\",\"damage\":14,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 重击，造成 14 点伤害 (防御减伤)\",\"timestamp\":\"2026-02-04T23:10:22.5553008\"}]', '2026-02-04 23:08:44', '2026-02-04 23:10:30', '2026-02-04 23:10:30');
INSERT INTO `t_battle_record` VALUES (19, 'BATTLE_1770218454003_9ff0fc61', 2, '测试玩家2', 2, 1, '测试玩家1', 1, 1, 'SURRENDER', 2, 16, 82, 1150, 1135, 150, 1070, 1095, '[{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家1 已准备\",\"timestamp\":\"2026-02-04T23:20:55.5309306\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"准备就绪\",\"skillName\":\"准备就绪\",\"damage\":0,\"heal\":0,\"targetUserId\":null,\"targetNickname\":null,\"description\":\"测试玩家2 已准备\",\"timestamp\":\"2026-02-04T23:20:58.0987348\"},{\"round\":1,\"actorUserId\":2,\"actorNickname\":\"测试玩家2\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":0,\"heal\":0,\"targetUserId\":1,\"targetNickname\":\"测试玩家1\",\"description\":\"测试玩家2 对 测试玩家1 使用 普通攻击，造成 0 点伤害 (被闪避!)\",\"timestamp\":\"2026-02-04T23:21:00.2201975\"},{\"round\":1,\"actorUserId\":1,\"actorNickname\":\"测试玩家1\",\"action\":\"普通攻击\",\"skillName\":\"普通攻击\",\"damage\":18,\"heal\":0,\"targetUserId\":2,\"targetNickname\":\"测试玩家2\",\"description\":\"测试玩家1 对 测试玩家2 使用 普通攻击，造成 18 点伤害\",\"timestamp\":\"2026-02-04T23:21:06.4024935\"}]', '2026-02-04 23:20:54', '2026-02-04 23:21:10', '2026-02-04 23:21:11');

-- ----------------------------
-- Table structure for t_character
-- ----------------------------
DROP TABLE IF EXISTS `t_character`;
CREATE TABLE `t_character`  (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '角色ID',
  `user_id` bigint NOT NULL COMMENT '所属用户ID',
  `char_name` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '角色名',
  `char_type` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '角色类型：warrior/mage/assassin',
  `level` int NULL DEFAULT 1 COMMENT '等级',
  `exp` int NULL DEFAULT 0 COMMENT '经验值',
  `max_hp` int NULL DEFAULT 100 COMMENT '最大生命值',
  `current_hp` int NULL DEFAULT 100 COMMENT '当前生命值',
  `attack` int NULL DEFAULT 10 COMMENT '攻击力',
  `defense` int NULL DEFAULT 5 COMMENT '防御力',
  `speed` int NULL DEFAULT 10 COMMENT '速度（决定行动顺序）',
  `crit_rate` int NULL DEFAULT 5 COMMENT '暴击率(%)',
  `dodge_rate` int NULL DEFAULT 5 COMMENT '闪避率(%)',
  `is_active` int NOT NULL COMMENT '是否启用',
  `created_at` datetime NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_user_active`(`user_id` ASC, `is_active` ASC) USING BTREE,
  CONSTRAINT `t_character_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `t_user` (`id`) ON DELETE CASCADE ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 6 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '角色表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_character
-- ----------------------------
INSERT INTO `t_character` VALUES (1, 1, '剑圣', 'warrior', 1, 0, 150, 150, 20, 10, 8, 5, 5, 1, '2026-01-18 13:57:12', '2026-02-04 23:21:40');
INSERT INTO `t_character` VALUES (2, 2, '法师', 'mage', 1, 0, 100, 100, 25, 5, 12, 10, 5, 1, '2026-01-18 13:57:12', '2026-01-18 13:57:12');

-- ----------------------------
-- Table structure for t_character_skill
-- ----------------------------
DROP TABLE IF EXISTS `t_character_skill`;
CREATE TABLE `t_character_skill`  (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `character_id` bigint NOT NULL COMMENT '角色ID',
  `skill_id` int NOT NULL COMMENT '技能ID',
  `skill_level` int NULL DEFAULT 1 COMMENT '技能等级',
  `created_at` datetime NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `uk_char_skill`(`character_id` ASC, `skill_id` ASC) USING BTREE,
  INDEX `skill_id`(`skill_id` ASC) USING BTREE,
  CONSTRAINT `t_character_skill_ibfk_1` FOREIGN KEY (`character_id`) REFERENCES `t_character` (`id`) ON DELETE CASCADE ON UPDATE RESTRICT,
  CONSTRAINT `t_character_skill_ibfk_2` FOREIGN KEY (`skill_id`) REFERENCES `t_skill` (`id`) ON DELETE CASCADE ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '角色技能关联表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_character_skill
-- ----------------------------
INSERT INTO `t_character_skill` VALUES (1, 1, 1, 1, '2026-01-18 13:57:12');
INSERT INTO `t_character_skill` VALUES (2, 1, 2, 1, '2026-01-18 13:57:12');
INSERT INTO `t_character_skill` VALUES (3, 2, 1, 1, '2026-01-18 13:57:12');
INSERT INTO `t_character_skill` VALUES (4, 2, 3, 1, '2026-01-18 13:57:12');

-- ----------------------------
-- Table structure for t_character_template
-- ----------------------------
DROP TABLE IF EXISTS `t_character_template`;
CREATE TABLE `t_character_template`  (
  `id` int NOT NULL AUTO_INCREMENT COMMENT '模板ID',
  `char_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '职业类型',
  `char_name_prefix` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '职业名',
  `base_max_hp` int NOT NULL COMMENT '初始最大生命',
  `base_attack` int NOT NULL COMMENT '初始攻击',
  `base_defense` int NOT NULL COMMENT '初始防御',
  `base_speed` int NOT NULL COMMENT '初始速度',
  `base_crit_rate` int NULL DEFAULT 5 COMMENT '初始暴击率(%)',
  `base_dodge_rate` int NULL DEFAULT 5 COMMENT '初始闪避率(%)',
  `created_at` datetime NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `char_type`(`char_type` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 4 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '角色职业初始模板表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_character_template
-- ----------------------------
INSERT INTO `t_character_template` VALUES (1, 'warrior', '见习战士', 150, 15, 8, 8, 5, 5, '2026-01-18 13:57:12');
INSERT INTO `t_character_template` VALUES (2, 'mage', '魔法学徒', 80, 25, 3, 12, 10, 5, '2026-01-18 13:57:12');
INSERT INTO `t_character_template` VALUES (3, 'assassin', '流浪刺客', 100, 20, 4, 15, 20, 15, '2026-01-18 13:57:12');

-- ----------------------------
-- Table structure for t_friend
-- ----------------------------
DROP TABLE IF EXISTS `t_friend`;
CREATE TABLE `t_friend`  (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `user_id` bigint NOT NULL,
  `friend_id` bigint NOT NULL,
  `status` int NULL DEFAULT NULL,
  `created_at` datetime NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `uk_friend`(`user_id` ASC, `friend_id` ASC) USING BTREE,
  UNIQUE INDEX `UKc04qpgsluxyal7bp509obm078`(`user_id` ASC, `friend_id` ASC) USING BTREE,
  INDEX `FKo76hoeh0q8ko0pcvq52ukwv1f`(`friend_id` ASC) USING BTREE,
  CONSTRAINT `FKc6ufyf06xt508rpf68wfl3s7v` FOREIGN KEY (`user_id`) REFERENCES `t_user` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `FKo76hoeh0q8ko0pcvq52ukwv1f` FOREIGN KEY (`friend_id`) REFERENCES `t_user` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '好友关系表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_friend
-- ----------------------------
INSERT INTO `t_friend` VALUES (1, 1, 2, 1, '2026-01-27 21:37:30');
INSERT INTO `t_friend` VALUES (2, 2, 1, 1, '2026-01-27 21:37:30');

-- ----------------------------
-- Table structure for t_item
-- ----------------------------
DROP TABLE IF EXISTS `t_item`;
CREATE TABLE `t_item`  (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `type` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'AVATAR_FRAME/POTION',
  `price` int NOT NULL COMMENT '金币价格',
  `icon_path` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '资源路径',
  `description` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '备注',
  `created_at` datetime NULL DEFAULT CURRENT_TIMESTAMP,
  `effect_value` int NULL DEFAULT 0 COMMENT '效果数值(如回复量)',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '道具表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_item
-- ----------------------------
INSERT INTO `t_item` VALUES (1, '黄金边框', 'AVATAR_FRAME', 500, '/frames/gold.png', '黄金边框，尊贵象征', '2026-01-18 13:57:12', 0);
INSERT INTO `t_item` VALUES (2, '生命药水', 'POTION', 100, '/items/health_potion.png', '恢复50点生命值', '2026-01-18 13:57:12', 50);
INSERT INTO `t_item` VALUES (3, '强力药水', 'POTION', 300, '/items/big_potion.png', '恢复100点生命值', '2026-01-18 18:30:15', 100);
INSERT INTO `t_item` VALUES (4, '魔法边框', 'AVATAR_FRAME', 500, '/frames/magic.png', '魔法边框，魔法增强', '2026-01-18 19:10:34', 0);

-- ----------------------------
-- Table structure for t_message_board
-- ----------------------------
DROP TABLE IF EXISTS `t_message_board`;
CREATE TABLE `t_message_board`  (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `target_user_id` bigint NOT NULL COMMENT '被留言的人',
  `sender_user_id` bigint NOT NULL COMMENT '留言的人',
  `content` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '内容',
  `created_at` datetime NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_target`(`target_user_id` ASC) USING BTREE,
  INDEX `FKh6le3i29rdyw7s1eexnundnob`(`sender_user_id` ASC) USING BTREE,
  CONSTRAINT `FKg798ndqx7i4yod136e5vb3l52` FOREIGN KEY (`target_user_id`) REFERENCES `t_user` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `FKh6le3i29rdyw7s1eexnundnob` FOREIGN KEY (`sender_user_id`) REFERENCES `t_user` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '留言板表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_message_board
-- ----------------------------
INSERT INTO `t_message_board` VALUES (1, 2, 1, 'Ciallo', '2026-01-27 21:21:20');
INSERT INTO `t_message_board` VALUES (2, 1, 2, 'Ciallo', '2026-01-31 15:56:05');

-- ----------------------------
-- Table structure for t_skill
-- ----------------------------
DROP TABLE IF EXISTS `t_skill`;
CREATE TABLE `t_skill`  (
  `id` int NOT NULL COMMENT '技能ID（不自增，手动指定）',
  `skill_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '技能名',
  `skill_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '技能类型',
  `target_type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '施展对象',
  `cooldown` int NULL DEFAULT 0 COMMENT '冷却回合数',
  `multiplier` double NULL DEFAULT 1 COMMENT '伤害/治疗倍率',
  `defense_multiplier` double NULL DEFAULT 0 COMMENT '防御穿透/减伤倍率',
  `mana_cost` int NULL DEFAULT 0 COMMENT '消耗MP',
  `description` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '描述',
  `created_at` datetime NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '技能表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_skill
-- ----------------------------
INSERT INTO `t_skill` VALUES (1, '普通攻击', 'attack', 'ENEMY', 0, 1, 0.5, 0, '造成攻击力100%的伤害', '2026-01-18 13:57:12');
INSERT INTO `t_skill` VALUES (2, '重击', 'attack', 'ENEMY', 2, 1.5, 0.3, 10, '造成攻击力150%的伤害', '2026-01-18 13:57:12');
INSERT INTO `t_skill` VALUES (3, '治疗术', 'heal', 'SELF', 3, 0.3, 0, 15, '恢复最大生命值30%', '2026-01-18 13:57:12');

-- ----------------------------
-- Table structure for t_user
-- ----------------------------
DROP TABLE IF EXISTS `t_user`;
CREATE TABLE `t_user`  (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '用户ID',
  `username` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '用户名',
  `password` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '密码（BCrypt加密）',
  `nickname` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '昵称',
  `email` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT '邮箱',
  `elo_rating` int NULL DEFAULT 1000 COMMENT 'ELO段位分数',
  `total_battles` int NULL DEFAULT 0 COMMENT '总战斗次数',
  `win_count` int NULL DEFAULT 0 COMMENT '胜利次数',
  `gold` int NULL DEFAULT 1000 COMMENT '金币',
  `avatar_frame_id` int NULL DEFAULT 0 COMMENT '当前佩戴的头像框ID',
  `status` int NOT NULL COMMENT '封禁状态（“0”为已封禁）',
  `created_at` datetime NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` datetime NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `username`(`username` ASC) USING BTREE,
  INDEX `idx_username`(`username` ASC) USING BTREE,
  INDEX `idx_elo`(`elo_rating` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '用户表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_user
-- ----------------------------
INSERT INTO `t_user` VALUES (1, 'player1', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVKIUi', '测试玩家1', 'player1@test.lan', 1095, 23, 11, 5150, 1, 1, '2026-01-18 13:57:12', '2026-02-04 23:21:10');
INSERT INTO `t_user` VALUES (2, 'player2', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVKIUi', '测试玩家2', 'player2@test.lan', 1135, 23, 12, 2780, 4, 1, '2026-01-18 13:57:12', '2026-02-04 23:21:11');

-- ----------------------------
-- Table structure for t_user_inventory
-- ----------------------------
DROP TABLE IF EXISTS `t_user_inventory`;
CREATE TABLE `t_user_inventory`  (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `user_id` bigint NOT NULL,
  `item_id` int NOT NULL,
  `count` int NULL DEFAULT 1 COMMENT '数量',
  `is_equipped` bit(1) NULL DEFAULT NULL COMMENT '是否装备',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `user_id`(`user_id` ASC) USING BTREE,
  INDEX `item_id`(`item_id` ASC) USING BTREE,
  CONSTRAINT `t_user_inventory_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `t_user` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `t_user_inventory_ibfk_2` FOREIGN KEY (`item_id`) REFERENCES `t_item` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 7 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '用户背包表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of t_user_inventory
-- ----------------------------
INSERT INTO `t_user_inventory` VALUES (1, 1, 2, 2, b'0');
INSERT INTO `t_user_inventory` VALUES (2, 1, 3, 1, b'0');
INSERT INTO `t_user_inventory` VALUES (3, 2, 2, 2, b'0');
INSERT INTO `t_user_inventory` VALUES (4, 2, 3, 1, b'0');
INSERT INTO `t_user_inventory` VALUES (5, 1, 1, 1, b'1');
INSERT INTO `t_user_inventory` VALUES (6, 2, 4, 1, b'1');

SET FOREIGN_KEY_CHECKS = 1;
